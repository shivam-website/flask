{%extends "base.html"%}
{%block content%}
<h1>Welcome {{usr}}</h1>
<script>
  const text = "{{ tts_text }}";

  if (text) {
    const utterance = new SpeechSynthesisUtterance(text);

    utterance.lang = "hi-IN";   // Hindi (India)
    utterance.rate = 0.92;      // Slightly slow = respectful
    utterance.pitch = 1.0;      // Natural human pitch
    utterance.volume = 1.0;

    function speakHindi() {
      const voices = speechSynthesis.getVoices();

      // Prefer Hindi voice
      const hindiVoice = voices.find(v => v.lang === "hi-IN");

      utterance.voice = hindiVoice || voices[0];
      speechSynthesis.speak(utterance);
    }

    // Chrome fix
    if (speechSynthesis.getVoices().length === 0) {
      speechSynthesis.onvoiceschanged = speakHindi;
    } else {
      speakHindi();
    }
  }
</script>


{%endblock%}
